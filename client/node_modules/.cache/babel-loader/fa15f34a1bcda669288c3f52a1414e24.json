{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = exports.OutlineInternal = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _makeCancellablePromise = _interopRequireDefault(require(\"make-cancellable-promise\"));\n\nvar _makeEventProps = _interopRequireDefault(require(\"make-event-props\"));\n\nvar _mergeClassNames = _interopRequireDefault(require(\"merge-class-names\"));\n\nvar _DocumentContext = _interopRequireDefault(require(\"./DocumentContext\"));\n\nvar _OutlineContext = _interopRequireDefault(require(\"./OutlineContext\"));\n\nvar _OutlineItem = _interopRequireDefault(require(\"./OutlineItem\"));\n\nvar _utils = require(\"./shared/utils\");\n\nvar _propTypes2 = require(\"./shared/propTypes\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = (0, _getPrototypeOf2[\"default\"])(Derived),\n        result;\n\n    if (_isNativeReflectConstruct()) {\n      var NewTarget = (0, _getPrototypeOf2[\"default\"])(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return (0, _possibleConstructorReturn2[\"default\"])(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar OutlineInternal = /*#__PURE__*/function (_PureComponent) {\n  (0, _inherits2[\"default\"])(OutlineInternal, _PureComponent);\n\n  var _super = _createSuper(OutlineInternal);\n\n  function OutlineInternal() {\n    var _this;\n\n    (0, _classCallCheck2[\"default\"])(this, OutlineInternal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"state\", {\n      outline: null\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"loadOutline\", /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee() {\n      var pdf, cancellable, outline;\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              pdf = _this.props.pdf;\n\n              _this.setState(function (prevState) {\n                if (!prevState.outline) {\n                  return null;\n                }\n\n                return {\n                  outline: null\n                };\n              });\n\n              _context.prev = 2;\n              cancellable = (0, _makeCancellablePromise[\"default\"])(pdf.getOutline());\n              _this.runningTask = cancellable;\n              _context.next = 7;\n              return cancellable.promise;\n\n            case 7:\n              outline = _context.sent;\n\n              _this.setState({\n                outline: outline\n              }, _this.onLoadSuccess);\n\n              _context.next = 14;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](2);\n\n              _this.onLoadError(_context.t0);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[2, 11]]);\n    })));\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onLoadSuccess\", function () {\n      var onLoadSuccess = _this.props.onLoadSuccess;\n      var outline = _this.state.outline;\n      if (onLoadSuccess) onLoadSuccess(outline);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onLoadError\", function (error) {\n      _this.setState({\n        outline: false\n      });\n\n      (0, _utils.errorOnDev)(error);\n      var onLoadError = _this.props.onLoadError;\n      if (onLoadError) onLoadError(error);\n    });\n    (0, _defineProperty2[\"default\"])((0, _assertThisInitialized2[\"default\"])(_this), \"onItemClick\", function (_ref2) {\n      var pageIndex = _ref2.pageIndex,\n          pageNumber = _ref2.pageNumber;\n      var onItemClick = _this.props.onItemClick;\n\n      if (onItemClick) {\n        onItemClick({\n          pageIndex: pageIndex,\n          pageNumber: pageNumber\n        });\n      }\n    });\n    return _this;\n  }\n\n  (0, _createClass2[\"default\"])(OutlineInternal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var pdf = this.props.pdf;\n\n      if (!pdf) {\n        throw new Error('Attempted to load an outline, but no document was specified.');\n      }\n\n      this.loadOutline();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var pdf = this.props.pdf;\n\n      if (prevProps.pdf && pdf !== prevProps.pdf) {\n        this.loadOutline();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      (0, _utils.cancelRunningTask)(this.runningTask);\n    }\n  }, {\n    key: \"renderOutline\",\n    value: function renderOutline() {\n      var outline = this.state.outline;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"ul\", null, outline.map(function (item, itemIndex) {\n        return /*#__PURE__*/_react[\"default\"].createElement(_OutlineItem[\"default\"], {\n          key: typeof item.destination === 'string' ? item.destination : itemIndex,\n          item: item\n        });\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var pdf = this.props.pdf;\n      var outline = this.state.outline;\n\n      if (!pdf || !outline) {\n        return null;\n      }\n\n      var _this$props = this.props,\n          className = _this$props.className,\n          inputRef = _this$props.inputRef;\n      return /*#__PURE__*/_react[\"default\"].createElement(\"div\", (0, _extends2[\"default\"])({\n        className: (0, _mergeClassNames[\"default\"])('react-pdf__Outline', className),\n        ref: inputRef\n      }, this.eventProps), /*#__PURE__*/_react[\"default\"].createElement(_OutlineContext[\"default\"].Provider, {\n        value: this.childContext\n      }, this.renderOutline()));\n    }\n  }, {\n    key: \"childContext\",\n    get: function get() {\n      return {\n        onClick: this.onItemClick\n      };\n    }\n  }, {\n    key: \"eventProps\",\n    get: function get() {\n      var _this2 = this; // eslint-disable-next-line react/destructuring-assignment\n\n\n      return (0, _makeEventProps[\"default\"])(this.props, function () {\n        return _this2.state.outline;\n      });\n    }\n    /**\n     * Called when an outline is read successfully\n     */\n\n  }]);\n  return OutlineInternal;\n}(_react.PureComponent);\n\nexports.OutlineInternal = OutlineInternal;\nOutlineInternal.propTypes = _objectSpread({\n  className: _propTypes2.isClassName,\n  inputRef: _propTypes[\"default\"].func,\n  onItemClick: _propTypes[\"default\"].func,\n  onLoadError: _propTypes[\"default\"].func,\n  onLoadSuccess: _propTypes[\"default\"].func,\n  pdf: _propTypes2.isPdf\n}, _propTypes2.eventProps);\n\nfunction Outline(props, ref) {\n  return /*#__PURE__*/_react[\"default\"].createElement(_DocumentContext[\"default\"].Consumer, null, function (context) {\n    return /*#__PURE__*/_react[\"default\"].createElement(OutlineInternal, (0, _extends2[\"default\"])({\n      ref: ref\n    }, context, props));\n  });\n}\n\nvar _default = _react[\"default\"].forwardRef(Outline);\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}